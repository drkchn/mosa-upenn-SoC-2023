#!/bin/sh

protected_branch="adding-pre-push"
force_push_allowed=false

echo "Checking if push to $protected_branch branch is allowed..."


# Check if -f flag is provided
for var in "$@"; do
  echo "variables"
  echo $var

    if [ "$var" = "-f" ]; then
        echo "updating"
        force_push_allowed=true
        break
    fi
done


echo $force_push_allowed

while read local_ref local_sha remote_ref remote_sha
do
    if [ "$local_ref" = "refs/heads/$protected_branch" ] && [ "$force_push_allowed" = false ]; then
            echo "Push to $protected_branch branch is not allowed."
            exit 1
    fi

    exit 0
done

exit 0
